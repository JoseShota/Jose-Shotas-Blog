---
import { getLangFromUrl, useTranslations } from '../i18n/utils'; // Crearemos esto en un segundo
import { ui, defaultLang } from '../i18n/ui';

const { title = "Digital Garden / Archivo Personal" } = Astro.props;

// Detectar el idioma actual basado en la URL
const lang = Astro.currentLocale || defaultLang;

// Función para obtener las traducciones
function t(key) {
  return ui[lang][key] || ui[defaultLang][key];
}

// Función para generar links (si es inglés, agrega /en/ al principio)
function getPath(path) {
    if (lang === 'en') return `/en${path}`;
    return path;
}
---

<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    
    <style>
      :root {
        --color-bg: #111111;
        --color-text-light: #dddddd;
        --color-text-accent: #666666;
        --font-mono: 'Courier New', Courier, monospace;
      }
      body {
        background-color: var(--color-bg);
        color: var(--color-text-light);
        font-family: var(--font-mono);
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        line-height: 1.6;
      }
      header { margin-bottom: 3rem; }
      h1 { 
        font-weight: normal; 
        border-bottom: 1px solid var(--color-text-accent); 
        padding-bottom: 1rem; 
      }
      a { 
        color: var(--color-text-accent); 
        text-decoration: none; 
        margin-right: 15px; 
      }
      a:hover { color: var(--color-text-light); }
      /* Estilo extra para el selector de idioma si quisieras ponerlo */
      .lang-switch { float: right; font-size: 0.8em; }
    </style>
  </head>
  
  <body>
    <header>
      <div class="lang-switch">
        <a href="/">ES</a> / <a href="/en">EN</a>
      </div>
      <h1>{title}</h1>
      <nav>
        <a href={getPath('/')}>{t('nav.home')}</a>
        <a href={getPath('/musica')}>{t('nav.music')}</a>
        <a href={getPath('/videos')}>{t('nav.videos')}</a>
        <a href={getPath('/cv')}>{t('nav.cv')}</a>
      </nav>
    </header>

    <main>
        <slot />
    </main>

  </body>
</html>